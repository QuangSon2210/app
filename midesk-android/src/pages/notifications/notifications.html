<!--
  Generated template for the NotificationsPage page.

  See http://ionicframework.com/docs/components/#navigation for more info on
  Ionic pages and navigation.
-->
<ion-header>

  <ion-navbar>
    <ion-title>Thông Báo</ion-title>
  </ion-navbar>

</ion-header>


<ion-content no-padding>
	<ion-list>
	  	<ion-item-sliding *ngFor="let item of modelNotify.dataItems;let i=index">
		    <ion-item *ngIf="!item.del" (click)="viewTicketDetail(item,i)"  [ngStyle]="{'background':item.seen?'#FFFFFF':'#ebeef0'}">
		      <ion-avatar class="box-ticket" item-start><ion-icon color="midesk" name="pricetags"></ion-icon></ion-avatar>
		      <h4 [innerHTML]="item.title|safeHtml"></h4>
					<p>{{item.content}}</p>
					<p>
		      	<ion-icon color="primary" *ngIf="item.channel=='chat'" name="chatbubbles"></ion-icon>
		      	<ion-icon *ngIf="item.channel=='api'" name="cloud"></ion-icon>
		      	<ion-icon color="facebook" *ngIf="item.channel=='facebook'" name="logo-facebook"></ion-icon>
		      	<ion-icon color="chrome" *ngIf="item.channel=='web'" name="logo-chrome"></ion-icon>
		      	<ion-icon color="secondary" *ngIf="item.channel=='voice'" name="call"></ion-icon>
		      	<i>  {{item.created_at| toTime}}</i>
		      </p>
		    </ion-item>
		    <ion-item-options *ngIf="!item.del"  side="right">
		      <button [ngStyle]="{'background':item.seen?'#FFFFFF':'#ebeef0' }" (click)="deleteViewNotify(item,i)" ion-button><ion-icon color="danger" name="trash"></ion-icon></button>
		      <button [ngStyle]="{'background':item.seen?'#FFFFFF':'#ebeef0' }" *ngIf="!item.seen"  (click)="updateViewNotify(item,i)" ion-button><ion-icon color="dark" name="notifications-off"></ion-icon></button>
		    </ion-item-options>
	  	</ion-item-sliding>
	  	<ion-item *ngIf="modelNotify.loadMore"  text-center>
	  	<img *ngIf="!modelNotify.loading" (click)="loadMoreNotification()" class="more-icon" src="assets/imgs/more.png" />
	  	<ion-spinner *ngIf="modelNotify.loading" name="crescent"></ion-spinner>
	</ion-item>
	</ion-list>
	<ion-refresher spinner="spiral" (ionRefresh)="doRefresh($event)">
    	<ion-refresher-content></ion-refresher-content>
  	</ion-refresher>
	
</ion-content>
